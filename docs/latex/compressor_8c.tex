\hypertarget{compressor_8c}{}\doxysection{compressor.\+c File Reference}
\label{compressor_8c}\index{compressor.c@{compressor.c}}
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include \char`\"{}jsmn.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}picocoap.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}rules.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}compressor.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}schc\+\_\+config.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{compressor_8c_ac1569580e90e636a6d48366af83f3164}{get\+\_\+node\+\_\+ip}} (\mbox{\hyperlink{config_8h_a871e6877df8d1bf5f1d0690d6b918f6b}{schc\+\_\+ipaddr\+\_\+t}} $\ast$node\+\_\+ip)
\begin{DoxyCompactList}\small\item\em Get the node its IP address as set during initialization. \end{DoxyCompactList}\item 
static struct \mbox{\hyperlink{structschc__device}{schc\+\_\+device}} $\ast$ \mbox{\hyperlink{compressor_8c_ac9e32a3cb72316274db7b597a9aca407}{get\+\_\+device\+\_\+by\+\_\+id}} (uint32\+\_\+t device\+\_\+id)
\begin{DoxyCompactList}\small\item\em Get a device by it\textquotesingle{}s id. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{compressor_8c_a15002a02e9cae01e5629cb2d474fe482}{set\+\_\+rule\+\_\+id}} (struct \mbox{\hyperlink{structschc__rule__t}{schc\+\_\+rule\+\_\+t}} $\ast$schc\+\_\+rule, uint8\+\_\+t $\ast$data)
\item 
struct \mbox{\hyperlink{structschc__rule__t}{schc\+\_\+rule\+\_\+t}} $\ast$ \mbox{\hyperlink{compressor_8c_aaf76c0525a94eecb1f694ba09b435c49}{get\+\_\+schc\+\_\+rule\+\_\+by\+\_\+reliability\+\_\+mode}} (struct \mbox{\hyperlink{structschc__rule__t}{schc\+\_\+rule\+\_\+t}} $\ast$schc\+\_\+rule, \mbox{\hyperlink{schc__config_8h_a00b61f9b90ab7065eb6a978141d7fd34}{reliability\+\_\+mode}} mode, uint32\+\_\+t device\+\_\+id)
\item 
static struct \mbox{\hyperlink{structschc__rule__t}{schc\+\_\+rule\+\_\+t}} $\ast$ \mbox{\hyperlink{compressor_8c_ab1cdc4ecc8218636dd177a43cf85bb63}{get\+\_\+schc\+\_\+rule\+\_\+by\+\_\+layer\+\_\+ids}} (uint8\+\_\+t ip\+\_\+rule\+\_\+id, uint8\+\_\+t udp\+\_\+rule\+\_\+id, uint8\+\_\+t coap\+\_\+rule\+\_\+id, uint32\+\_\+t device\+\_\+id, \mbox{\hyperlink{schc__config_8h_a00b61f9b90ab7065eb6a978141d7fd34}{reliability\+\_\+mode}} mode)
\item 
struct \mbox{\hyperlink{structschc__rule__t}{schc\+\_\+rule\+\_\+t}} $\ast$ \mbox{\hyperlink{compressor_8c_a5bafc11a567bc093210ab7cb3afe650f}{get\+\_\+schc\+\_\+rule\+\_\+by\+\_\+rule\+\_\+id}} (uint8\+\_\+t rule\+\_\+id, uint32\+\_\+t device\+\_\+id)
\item 
static uint8\+\_\+t \mbox{\hyperlink{compressor_8c_a011f3d1c1af22b637345516f372e67ec}{compress}} (unsigned char $\ast$schc\+\_\+header, unsigned char $\ast$header, uint16\+\_\+t cols, const struct \mbox{\hyperlink{structschc__layer__rule__t}{schc\+\_\+layer\+\_\+rule\+\_\+t}} $\ast$rule)
\begin{DoxyCompactList}\small\item\em The compression mechanism. \end{DoxyCompactList}\item 
static uint8\+\_\+t \mbox{\hyperlink{compressor_8c_aeb2e4f6850b938ede75698f05fc09df7}{decompress}} (unsigned char $\ast$schc\+\_\+header, const struct \mbox{\hyperlink{structschc__layer__rule__t}{schc\+\_\+layer\+\_\+rule\+\_\+t}} $\ast$rule, unsigned char $\ast$data, uint8\+\_\+t $\ast$header\+\_\+offset)
\begin{DoxyCompactList}\small\item\em The decompression mechanism. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{compressor_8c_a282d7dd1e4fca538ce83c2b59f80f025}{generate\+\_\+ip\+\_\+udp\+\_\+header\+\_\+struct}} (const uint8\+\_\+t $\ast$data, struct \mbox{\hyperlink{structschc__udpip__hdr}{schc\+\_\+udpip\+\_\+hdr}} $\ast$ip\+\_\+udp\+\_\+header)
\begin{DoxyCompactList}\small\item\em Fills the passed I\+P/\+U\+DP header struct from a 8-\/bit buffer. \end{DoxyCompactList}\item 
static uint8\+\_\+t \mbox{\hyperlink{compressor_8c_a833249a99cd83a96924d83a54653d524}{generate\+\_\+ip\+\_\+header\+\_\+fields}} (struct \mbox{\hyperlink{structschc__udpip__hdr}{schc\+\_\+udpip\+\_\+hdr}} $\ast$ip\+\_\+udp\+\_\+header)
\begin{DoxyCompactList}\small\item\em Generates a unified unsigned char array, based on the IP header provided. \end{DoxyCompactList}\item 
static struct \mbox{\hyperlink{structschc__ipv6__rule__t}{schc\+\_\+ipv6\+\_\+rule\+\_\+t}} $\ast$ \mbox{\hyperlink{compressor_8c_aa8a76b825f1ad7fe92118e7604c59cce}{schc\+\_\+find\+\_\+ipv6\+\_\+rule\+\_\+from\+\_\+header}} (struct \mbox{\hyperlink{structschc__udpip__hdr}{schc\+\_\+udpip\+\_\+hdr}} $\ast$ip\+\_\+udp\+\_\+header, uint32\+\_\+t device\+\_\+id)
\begin{DoxyCompactList}\small\item\em Find a matching rule for the IP header. \end{DoxyCompactList}\item 
static uint8\+\_\+t \mbox{\hyperlink{compressor_8c_a1320d30f4ad75c404538114bad13bec6}{decompress\+\_\+ipv6\+\_\+rule}} (struct \mbox{\hyperlink{structschc__ipv6__rule__t}{schc\+\_\+ipv6\+\_\+rule\+\_\+t}} $\ast$rule, unsigned char $\ast$data, unsigned char $\ast$pckt\+\_\+out, uint8\+\_\+t $\ast$header\+\_\+offset)
\begin{DoxyCompactList}\small\item\em Decompress an I\+Pv6 rule, based on an input packet. \end{DoxyCompactList}\item 
static uint8\+\_\+t \mbox{\hyperlink{compressor_8c_a33691e9bd9cf5b38a033863deddc2c44}{generate\+\_\+udp\+\_\+header\+\_\+fields}} (struct \mbox{\hyperlink{structschc__udpip__hdr}{schc\+\_\+udpip\+\_\+hdr}} $\ast$ip\+\_\+udp\+\_\+header)
\begin{DoxyCompactList}\small\item\em Generates a unified unsigned char array, based on the U\+DP header provided. \end{DoxyCompactList}\item 
static struct \mbox{\hyperlink{structschc__udp__rule__t}{schc\+\_\+udp\+\_\+rule\+\_\+t}} $\ast$ \mbox{\hyperlink{compressor_8c_a899a5ee1d8a65d6df0143667b3f218e0}{schc\+\_\+find\+\_\+udp\+\_\+rule\+\_\+from\+\_\+header}} (const struct \mbox{\hyperlink{structschc__udpip__hdr}{schc\+\_\+udpip\+\_\+hdr}} $\ast$ip\+\_\+udp\+\_\+header, uint32\+\_\+t device\+\_\+id)
\begin{DoxyCompactList}\small\item\em Find a matching rule for the U\+DP header. \end{DoxyCompactList}\item 
static uint8\+\_\+t \mbox{\hyperlink{compressor_8c_a2c03acf1d57759cfe3d4e514bcf8d914}{decompress\+\_\+udp\+\_\+rule}} (struct \mbox{\hyperlink{structschc__udp__rule__t}{schc\+\_\+udp\+\_\+rule\+\_\+t}} $\ast$rule, unsigned char $\ast$data, unsigned char $\ast$pckt\+\_\+out, uint8\+\_\+t $\ast$header\+\_\+offset)
\begin{DoxyCompactList}\small\item\em Decompress a U\+DP rule, based on an input packet. \end{DoxyCompactList}\item 
static uint8\+\_\+t \mbox{\hyperlink{compressor_8c_a245641c6d319735ed5b7bf171fbede17}{generate\+\_\+coap\+\_\+header\+\_\+fields}} (\mbox{\hyperlink{structpcoap__pdu}{pcoap\+\_\+pdu}} $\ast$pdu)
\begin{DoxyCompactList}\small\item\em Generates an unsigned char array, based on the Co\+AP header provided. \end{DoxyCompactList}\item 
static struct \mbox{\hyperlink{structschc__coap__rule__t}{schc\+\_\+coap\+\_\+rule\+\_\+t}} $\ast$ \mbox{\hyperlink{compressor_8c_af6513773b3be40ec48f9db466ad89e37}{schc\+\_\+find\+\_\+coap\+\_\+rule\+\_\+from\+\_\+header}} (\mbox{\hyperlink{structpcoap__pdu}{pcoap\+\_\+pdu}} $\ast$pdu, uint32\+\_\+t device\+\_\+id)
\begin{DoxyCompactList}\small\item\em Find a matching rule for the Co\+AP header for a device id. \end{DoxyCompactList}\item 
static uint8\+\_\+t \mbox{\hyperlink{compressor_8c_a101b46fd538512a0324fc51b2d3a20ae}{decompress\+\_\+coap\+\_\+rule}} (struct \mbox{\hyperlink{structschc__coap__rule__t}{schc\+\_\+coap\+\_\+rule\+\_\+t}} $\ast$rule, unsigned char $\ast$data, uint8\+\_\+t $\ast$header\+\_\+offset, \mbox{\hyperlink{structpcoap__pdu}{pcoap\+\_\+pdu}} $\ast$msg)
\begin{DoxyCompactList}\small\item\em Decompress a Co\+AP rule, based on an input packet. \end{DoxyCompactList}\item 
static uint8\+\_\+t \mbox{\hyperlink{compressor_8c_a61950fdd581e34878efece4973ac1159}{equal}} (struct \mbox{\hyperlink{structschc__field}{schc\+\_\+field}} $\ast$target\+\_\+field, unsigned char $\ast$field\+\_\+value)
\begin{DoxyCompactList}\small\item\em The equal matching operator. \end{DoxyCompactList}\item 
static uint8\+\_\+t \mbox{\hyperlink{compressor_8c_a3700c9316a3fa2826dd77686c161638c}{ignore}} (struct \mbox{\hyperlink{structschc__field}{schc\+\_\+field}} $\ast$target\+\_\+field, unsigned char $\ast$field\+\_\+value)
\begin{DoxyCompactList}\small\item\em The ignore matching operator. \end{DoxyCompactList}\item 
static uint8\+\_\+t \mbox{\hyperlink{compressor_8c_a6e20dc749624654a5c2a59a7ab0a45b8}{M\+SB}} (struct \mbox{\hyperlink{structschc__field}{schc\+\_\+field}} $\ast$target\+\_\+field, unsigned char $\ast$field\+\_\+value)
\begin{DoxyCompactList}\small\item\em The M\+SB matching operator. \end{DoxyCompactList}\item 
static uint8\+\_\+t \mbox{\hyperlink{compressor_8c_aaa6535816b00df52f9f7b05970feca0a}{matchmap}} (struct \mbox{\hyperlink{structschc__field}{schc\+\_\+field}} $\ast$target\+\_\+field, unsigned char $\ast$field\+\_\+value)
\begin{DoxyCompactList}\small\item\em The match-\/map matching operator. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{compressor_8c_a3e74925e4bb4cb937a3ac4b951f41119}{set\+\_\+node\+\_\+ip}} (\mbox{\hyperlink{config_8h_a871e6877df8d1bf5f1d0690d6b918f6b}{schc\+\_\+ipaddr\+\_\+t}} $\ast$node\+\_\+ip)
\begin{DoxyCompactList}\small\item\em Notifies the compressor about the node its IP address. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{compressor_8c_a4fd03f3acd56b4bf55fc4c8e48567ab7}{schc\+\_\+compressor\+\_\+init}} (uint8\+\_\+t src\mbox{[}16\mbox{]})
\begin{DoxyCompactList}\small\item\em Initializes the S\+C\+HC compressor. \end{DoxyCompactList}\item 
int16\+\_\+t \mbox{\hyperlink{compressor_8c_a36e8de302d391da17499a00daaf598de}{schc\+\_\+compress}} (const uint8\+\_\+t $\ast$data, uint8\+\_\+t $\ast$buf, uint16\+\_\+t total\+\_\+length, uint32\+\_\+t device\+\_\+id, \mbox{\hyperlink{config_8h_a99f26e6ee9fcd62f75203b5402df8098}{direction}} dir, \mbox{\hyperlink{config_8h_af2b559cc2ee2eaee47fe1f15cc99f49e}{device\+\_\+type}} \mbox{\hyperlink{config_8h_af2b559cc2ee2eaee47fe1f15cc99f49e}{device\+\_\+type}}, struct \mbox{\hyperlink{structschc__rule__t}{schc\+\_\+rule\+\_\+t}} $\ast$$\ast$schc\+\_\+rule)
\begin{DoxyCompactList}\small\item\em Compresses a Co\+A\+P/\+U\+D\+P/\+IP packet. \end{DoxyCompactList}\item 
static uint16\+\_\+t \mbox{\hyperlink{compressor_8c_a67645e8b7174e226c4fd4892f81ae517}{compute\+\_\+length}} (unsigned char $\ast$data, uint16\+\_\+t data\+\_\+len)
\begin{DoxyCompactList}\small\item\em Set the packet length for the U\+DP and IP headers. \end{DoxyCompactList}\item 
static uint16\+\_\+t \mbox{\hyperlink{compressor_8c_aa4e0f02b97163cd6f8c09b6ac5736aa7}{chksum}} (uint16\+\_\+t sum, const uint8\+\_\+t $\ast$data, uint16\+\_\+t len)
\item 
uint16\+\_\+t \mbox{\hyperlink{compressor_8c_a89368d1a9e14855697684aa89b0f1aac}{compute\+\_\+checksum}} (unsigned char $\ast$data)
\begin{DoxyCompactList}\small\item\em Calculates the U\+DP checksum and sets the appropriate header fields. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{compressor_8c_ab7cac7873bdecbbf5ea769d90d91cc7e}{schc\+\_\+decompress}} (const uint8\+\_\+t $\ast$data, uint8\+\_\+t $\ast$buf, uint32\+\_\+t device\+\_\+id, uint16\+\_\+t total\+\_\+length, \mbox{\hyperlink{config_8h_a99f26e6ee9fcd62f75203b5402df8098}{direction}} dir, \mbox{\hyperlink{config_8h_af2b559cc2ee2eaee47fe1f15cc99f49e}{device\+\_\+type}} \mbox{\hyperlink{config_8h_af2b559cc2ee2eaee47fe1f15cc99f49e}{device\+\_\+type}})
\begin{DoxyCompactList}\small\item\em Construct the header from the layered set of rules. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{config_8h_a99f26e6ee9fcd62f75203b5402df8098}{direction}} \mbox{\hyperlink{compressor_8c_a9002ee397432c569fdda24ab772716e5}{DI}}
\item 
static \mbox{\hyperlink{config_8h_af2b559cc2ee2eaee47fe1f15cc99f49e}{device\+\_\+type}} \mbox{\hyperlink{compressor_8c_a8b2173bb0d4d2c74c3f1e683922ac905}{D\+E\+V\+I\+C\+E\+\_\+\+T\+Y\+PE}}
\item 
static \mbox{\hyperlink{config_8h_a871e6877df8d1bf5f1d0690d6b918f6b}{schc\+\_\+ipaddr\+\_\+t}} \mbox{\hyperlink{compressor_8c_af88fc53bc74390cc215e9b1548f38359}{node\+\_\+ip\+\_\+6}}
\item 
\mbox{\hyperlink{structjsmn__parser}{jsmn\+\_\+parser}} \mbox{\hyperlink{compressor_8c_a832436cdee822ecccd06537f5e889955}{json\+\_\+parser}}
\item 
\mbox{\hyperlink{structjsmntok__t}{jsmntok\+\_\+t}} \mbox{\hyperlink{compressor_8c_a6d19fbe1409f7470283881e0b642c417}{json\+\_\+token}} \mbox{[}\mbox{\hyperlink{schc__config__example_8h_a4e7d67d7aea26c4f57d1098595f90662}{J\+S\+O\+N\+\_\+\+T\+O\+K\+E\+NS}}\mbox{]}
\item 
unsigned char \mbox{\hyperlink{compressor_8c_a092ee897de6debb778fc14e1f242dc18}{ipv6\+\_\+header\+\_\+fields}} \mbox{[}\mbox{\hyperlink{schc__config__example_8h_ae1b67de7a1c26318d23f1c34e89fb989}{I\+P\+V6\+\_\+\+F\+I\+E\+L\+DS}}\mbox{]}\mbox{[}\mbox{\hyperlink{schc__config__example_8h_a96b977962436620ec037645e3e2e0ee8}{M\+A\+X\+\_\+\+I\+P\+V6\+\_\+\+F\+I\+E\+L\+D\+\_\+\+L\+E\+N\+G\+TH}}\mbox{]}
\item 
unsigned char \mbox{\hyperlink{compressor_8c_a19692020241c44be02a07c6ac77b3d92}{udp\+\_\+header\+\_\+fields}} \mbox{[}\mbox{\hyperlink{schc__config__example_8h_aed36719a087639bf1875b85276f09e55}{U\+D\+P\+\_\+\+F\+I\+E\+L\+DS}}\mbox{]}\mbox{[}\mbox{\hyperlink{schc__config__example_8h_aac32e96e8faf7ff86aced84537107bca}{M\+A\+X\+\_\+\+U\+D\+P\+\_\+\+F\+I\+E\+L\+D\+\_\+\+L\+E\+N\+G\+TH}}\mbox{]}
\item 
unsigned char \mbox{\hyperlink{compressor_8c_afb9db911b050d292c34053ab9e8cdf8c}{coap\+\_\+header\+\_\+fields}} \mbox{[}\mbox{\hyperlink{schc__config__example_8h_af1690024e8fe24a690d86ec4dd5d3bb6}{C\+O\+A\+P\+\_\+\+F\+I\+E\+L\+DS}}\mbox{]}\mbox{[}\mbox{\hyperlink{schc__config__example_8h_aa6420ecddb30151dd25bc1a2da3aacd1}{M\+A\+X\+\_\+\+C\+O\+A\+P\+\_\+\+F\+I\+E\+L\+D\+\_\+\+L\+E\+N\+G\+TH}}\mbox{]}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{compressor_8c_aa4e0f02b97163cd6f8c09b6ac5736aa7}\label{compressor_8c_aa4e0f02b97163cd6f8c09b6ac5736aa7}} 
\index{compressor.c@{compressor.c}!chksum@{chksum}}
\index{chksum@{chksum}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{chksum()}{chksum()}}
{\footnotesize\ttfamily static uint16\+\_\+t chksum (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{sum,  }\item[{const uint8\+\_\+t $\ast$}]{data,  }\item[{uint16\+\_\+t}]{len }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\mbox{\Hypertarget{compressor_8c_a011f3d1c1af22b637345516f372e67ec}\label{compressor_8c_a011f3d1c1af22b637345516f372e67ec}} 
\index{compressor.c@{compressor.c}!compress@{compress}}
\index{compress@{compress}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{compress()}{compress()}}
{\footnotesize\ttfamily static uint8\+\_\+t compress (\begin{DoxyParamCaption}\item[{unsigned char $\ast$}]{schc\+\_\+header,  }\item[{unsigned char $\ast$}]{header,  }\item[{uint16\+\_\+t}]{cols,  }\item[{const struct \mbox{\hyperlink{structschc__layer__rule__t}{schc\+\_\+layer\+\_\+rule\+\_\+t}} $\ast$}]{rule }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



The compression mechanism. 


\begin{DoxyParams}{Parameters}
{\em schc\+\_\+header} & the header in which to operate \\
\hline
{\em header} & the original header \\
\hline
{\em cols} & the number of fields the header contains \\
\hline
{\em rule} & the rule to match the compression with\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the length length of the compressed header 
\end{DoxyReturn}
\mbox{\Hypertarget{compressor_8c_a89368d1a9e14855697684aa89b0f1aac}\label{compressor_8c_a89368d1a9e14855697684aa89b0f1aac}} 
\index{compressor.c@{compressor.c}!compute\_checksum@{compute\_checksum}}
\index{compute\_checksum@{compute\_checksum}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{compute\_checksum()}{compute\_checksum()}}
{\footnotesize\ttfamily uint16\+\_\+t compute\+\_\+checksum (\begin{DoxyParamCaption}\item[{unsigned char $\ast$}]{data }\end{DoxyParamCaption})}



Calculates the U\+DP checksum and sets the appropriate header fields. 


\begin{DoxyParams}{Parameters}
{\em data} & pointer to the data packet\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
checksum the computed checksum 
\end{DoxyReturn}
\mbox{\Hypertarget{compressor_8c_a67645e8b7174e226c4fd4892f81ae517}\label{compressor_8c_a67645e8b7174e226c4fd4892f81ae517}} 
\index{compressor.c@{compressor.c}!compute\_length@{compute\_length}}
\index{compute\_length@{compute\_length}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{compute\_length()}{compute\_length()}}
{\footnotesize\ttfamily static uint16\+\_\+t compute\+\_\+length (\begin{DoxyParamCaption}\item[{unsigned char $\ast$}]{data,  }\item[{uint16\+\_\+t}]{data\+\_\+len }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Set the packet length for the U\+DP and IP headers. 


\begin{DoxyParams}{Parameters}
{\em data} & pointer to the data packet \\
\hline
{\em data\+\_\+len} & the length of the total packet\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 
\end{DoxyReturn}
\mbox{\Hypertarget{compressor_8c_aeb2e4f6850b938ede75698f05fc09df7}\label{compressor_8c_aeb2e4f6850b938ede75698f05fc09df7}} 
\index{compressor.c@{compressor.c}!decompress@{decompress}}
\index{decompress@{decompress}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{decompress()}{decompress()}}
{\footnotesize\ttfamily static uint8\+\_\+t decompress (\begin{DoxyParamCaption}\item[{unsigned char $\ast$}]{schc\+\_\+header,  }\item[{const struct \mbox{\hyperlink{structschc__layer__rule__t}{schc\+\_\+layer\+\_\+rule\+\_\+t}} $\ast$}]{rule,  }\item[{unsigned char $\ast$}]{data,  }\item[{uint8\+\_\+t $\ast$}]{header\+\_\+offset }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



The decompression mechanism. 


\begin{DoxyParams}{Parameters}
{\em schc\+\_\+header} & pointer to the header in which to operate \\
\hline
{\em rule} & pointer to the rule to use during the decompression \\
\hline
{\em nr\+\_\+of\+\_\+fields} & the number of fields \\
\hline
{\em rule} & the rule to match the compression with \\
\hline
{\em nr\+\_\+of\+\_\+fields} & the number of fields as found in the rule\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the length of the decompressed header 
\end{DoxyReturn}
\mbox{\Hypertarget{compressor_8c_a101b46fd538512a0324fc51b2d3a20ae}\label{compressor_8c_a101b46fd538512a0324fc51b2d3a20ae}} 
\index{compressor.c@{compressor.c}!decompress\_coap\_rule@{decompress\_coap\_rule}}
\index{decompress\_coap\_rule@{decompress\_coap\_rule}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{decompress\_coap\_rule()}{decompress\_coap\_rule()}}
{\footnotesize\ttfamily static uint8\+\_\+t decompress\+\_\+coap\+\_\+rule (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structschc__coap__rule__t}{schc\+\_\+coap\+\_\+rule\+\_\+t}} $\ast$}]{rule,  }\item[{unsigned char $\ast$}]{data,  }\item[{uint8\+\_\+t $\ast$}]{header\+\_\+offset,  }\item[{\mbox{\hyperlink{structpcoap__pdu}{pcoap\+\_\+pdu}} $\ast$}]{msg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Decompress a Co\+AP rule, based on an input packet. 


\begin{DoxyParams}{Parameters}
{\em rule} & the id of the Co\+AP rule to use during the decompression \\
\hline
{\em data} & pointer to the input data \\
\hline
{\em header\+\_\+offset} & pointer to the current offset in the decompressed header \\
\hline
{\em msg} & pointer to the Co\+AP message to use during the reconstruction \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{compressor_8c_a1320d30f4ad75c404538114bad13bec6}\label{compressor_8c_a1320d30f4ad75c404538114bad13bec6}} 
\index{compressor.c@{compressor.c}!decompress\_ipv6\_rule@{decompress\_ipv6\_rule}}
\index{decompress\_ipv6\_rule@{decompress\_ipv6\_rule}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{decompress\_ipv6\_rule()}{decompress\_ipv6\_rule()}}
{\footnotesize\ttfamily static uint8\+\_\+t decompress\+\_\+ipv6\+\_\+rule (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structschc__ipv6__rule__t}{schc\+\_\+ipv6\+\_\+rule\+\_\+t}} $\ast$}]{rule,  }\item[{unsigned char $\ast$}]{data,  }\item[{unsigned char $\ast$}]{pckt\+\_\+out,  }\item[{uint8\+\_\+t $\ast$}]{header\+\_\+offset }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Decompress an I\+Pv6 rule, based on an input packet. 


\begin{DoxyParams}{Parameters}
{\em rule} & the I\+Pv6 rule to use during the decompression \\
\hline
{\em data} & pointer to the input data \\
\hline
{\em pckt\+\_\+out} & buffer to the packet to store the decompressed data in \\
\hline
{\em header\+\_\+offset} & pointer to the current offset in the decompressed header \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{compressor_8c_a2c03acf1d57759cfe3d4e514bcf8d914}\label{compressor_8c_a2c03acf1d57759cfe3d4e514bcf8d914}} 
\index{compressor.c@{compressor.c}!decompress\_udp\_rule@{decompress\_udp\_rule}}
\index{decompress\_udp\_rule@{decompress\_udp\_rule}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{decompress\_udp\_rule()}{decompress\_udp\_rule()}}
{\footnotesize\ttfamily static uint8\+\_\+t decompress\+\_\+udp\+\_\+rule (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structschc__udp__rule__t}{schc\+\_\+udp\+\_\+rule\+\_\+t}} $\ast$}]{rule,  }\item[{unsigned char $\ast$}]{data,  }\item[{unsigned char $\ast$}]{pckt\+\_\+out,  }\item[{uint8\+\_\+t $\ast$}]{header\+\_\+offset }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Decompress a U\+DP rule, based on an input packet. 


\begin{DoxyParams}{Parameters}
{\em rule\+\_\+id} & the id of the U\+DP rule to use during the decompression \\
\hline
{\em data} & pointer to the input data \\
\hline
{\em pckt\+\_\+out} & buffer to the packet to store the decompressed data in \\
\hline
{\em header\+\_\+offset} & pointer to the current offset in the decompressed header\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 decompression succeeded 0 decompression failed 
\end{DoxyReturn}
\mbox{\Hypertarget{compressor_8c_a61950fdd581e34878efece4973ac1159}\label{compressor_8c_a61950fdd581e34878efece4973ac1159}} 
\index{compressor.c@{compressor.c}!equal@{equal}}
\index{equal@{equal}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{equal()}{equal()}}
{\footnotesize\ttfamily static uint8\+\_\+t equal (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structschc__field}{schc\+\_\+field}} $\ast$}]{target\+\_\+field,  }\item[{unsigned char $\ast$}]{field\+\_\+value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



The equal matching operator. 


\begin{DoxyParams}{Parameters}
{\em target\+\_\+field} & the field from the rule \\
\hline
{\em field\+\_\+value} & the value from the header to compare with the rule value\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if the target field matches the field value 0 if the target field doesn\textquotesingle{}t match the field value 
\end{DoxyReturn}
\mbox{\Hypertarget{compressor_8c_a245641c6d319735ed5b7bf171fbede17}\label{compressor_8c_a245641c6d319735ed5b7bf171fbede17}} 
\index{compressor.c@{compressor.c}!generate\_coap\_header\_fields@{generate\_coap\_header\_fields}}
\index{generate\_coap\_header\_fields@{generate\_coap\_header\_fields}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{generate\_coap\_header\_fields()}{generate\_coap\_header\_fields()}}
{\footnotesize\ttfamily static uint8\+\_\+t generate\+\_\+coap\+\_\+header\+\_\+fields (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structpcoap__pdu}{pcoap\+\_\+pdu}} $\ast$}]{pdu }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Generates an unsigned char array, based on the Co\+AP header provided. 


\begin{DoxyParams}{Parameters}
{\em header\+\_\+fields} & the array to transfer the header to \\
\hline
{\em cols} & the number of columns the header contains \\
\hline
{\em pdu} & the Co\+AP message to construct the header from\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the length of the array, which represents the number of Co\+AP fields 
\end{DoxyReturn}
\mbox{\Hypertarget{compressor_8c_a833249a99cd83a96924d83a54653d524}\label{compressor_8c_a833249a99cd83a96924d83a54653d524}} 
\index{compressor.c@{compressor.c}!generate\_ip\_header\_fields@{generate\_ip\_header\_fields}}
\index{generate\_ip\_header\_fields@{generate\_ip\_header\_fields}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{generate\_ip\_header\_fields()}{generate\_ip\_header\_fields()}}
{\footnotesize\ttfamily static uint8\+\_\+t generate\+\_\+ip\+\_\+header\+\_\+fields (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structschc__udpip__hdr}{schc\+\_\+udpip\+\_\+hdr}} $\ast$}]{ip\+\_\+udp\+\_\+header }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Generates a unified unsigned char array, based on the IP header provided. 


\begin{DoxyParams}{Parameters}
{\em header\+\_\+fields} & the array to transfer the header to \\
\hline
{\em ip\+\_\+udp\+\_\+header} & the I\+P/\+U\+DP header to construct the unified array from\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the length of the array, which represents the number of U\+DP fields 
\end{DoxyReturn}
\mbox{\Hypertarget{compressor_8c_a282d7dd1e4fca538ce83c2b59f80f025}\label{compressor_8c_a282d7dd1e4fca538ce83c2b59f80f025}} 
\index{compressor.c@{compressor.c}!generate\_ip\_udp\_header\_struct@{generate\_ip\_udp\_header\_struct}}
\index{generate\_ip\_udp\_header\_struct@{generate\_ip\_udp\_header\_struct}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{generate\_ip\_udp\_header\_struct()}{generate\_ip\_udp\_header\_struct()}}
{\footnotesize\ttfamily static void generate\+\_\+ip\+\_\+udp\+\_\+header\+\_\+struct (\begin{DoxyParamCaption}\item[{const uint8\+\_\+t $\ast$}]{data,  }\item[{struct \mbox{\hyperlink{structschc__udpip__hdr}{schc\+\_\+udpip\+\_\+hdr}} $\ast$}]{ip\+\_\+udp\+\_\+header }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Fills the passed I\+P/\+U\+DP header struct from a 8-\/bit buffer. 


\begin{DoxyParams}{Parameters}
{\em data} & the buffer to copy the data from \\
\hline
{\em ip\+\_\+udp\+\_\+header} & the I\+P/\+U\+DP header to construct the unified array from \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{compressor_8c_a33691e9bd9cf5b38a033863deddc2c44}\label{compressor_8c_a33691e9bd9cf5b38a033863deddc2c44}} 
\index{compressor.c@{compressor.c}!generate\_udp\_header\_fields@{generate\_udp\_header\_fields}}
\index{generate\_udp\_header\_fields@{generate\_udp\_header\_fields}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{generate\_udp\_header\_fields()}{generate\_udp\_header\_fields()}}
{\footnotesize\ttfamily static uint8\+\_\+t generate\+\_\+udp\+\_\+header\+\_\+fields (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structschc__udpip__hdr}{schc\+\_\+udpip\+\_\+hdr}} $\ast$}]{ip\+\_\+udp\+\_\+header }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Generates a unified unsigned char array, based on the U\+DP header provided. 


\begin{DoxyParams}{Parameters}
{\em header\+\_\+fields} & the array to transfer the header to \\
\hline
{\em ip\+\_\+udp\+\_\+header} & the I\+P/\+U\+DP header to construct the unified array from\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the length of the array, which represents the number of U\+DP fields 
\end{DoxyReturn}
\mbox{\Hypertarget{compressor_8c_ac9e32a3cb72316274db7b597a9aca407}\label{compressor_8c_ac9e32a3cb72316274db7b597a9aca407}} 
\index{compressor.c@{compressor.c}!get\_device\_by\_id@{get\_device\_by\_id}}
\index{get\_device\_by\_id@{get\_device\_by\_id}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{get\_device\_by\_id()}{get\_device\_by\_id()}}
{\footnotesize\ttfamily static struct \mbox{\hyperlink{structschc__device}{schc\+\_\+device}}$\ast$ get\+\_\+device\+\_\+by\+\_\+id (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{device\+\_\+id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Get a device by it\textquotesingle{}s id. 


\begin{DoxyParams}{Parameters}
{\em device\+\_\+id} & the id of the device\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\mbox{\hyperlink{structschc__device}{schc\+\_\+device}} the device which is found N\+U\+LL if no device was found 
\end{DoxyReturn}
\mbox{\Hypertarget{compressor_8c_ac1569580e90e636a6d48366af83f3164}\label{compressor_8c_ac1569580e90e636a6d48366af83f3164}} 
\index{compressor.c@{compressor.c}!get\_node\_ip@{get\_node\_ip}}
\index{get\_node\_ip@{get\_node\_ip}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{get\_node\_ip()}{get\_node\_ip()}}
{\footnotesize\ttfamily static void get\+\_\+node\+\_\+ip (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{config_8h_a871e6877df8d1bf5f1d0690d6b918f6b}{schc\+\_\+ipaddr\+\_\+t}} $\ast$}]{node\+\_\+ip }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Get the node its IP address as set during initialization. 

\begin{DoxyReturn}{Returns}
node\+\_\+ip\+\_\+6 the node its IP address 
\end{DoxyReturn}
\mbox{\Hypertarget{compressor_8c_ab1cdc4ecc8218636dd177a43cf85bb63}\label{compressor_8c_ab1cdc4ecc8218636dd177a43cf85bb63}} 
\index{compressor.c@{compressor.c}!get\_schc\_rule\_by\_layer\_ids@{get\_schc\_rule\_by\_layer\_ids}}
\index{get\_schc\_rule\_by\_layer\_ids@{get\_schc\_rule\_by\_layer\_ids}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{get\_schc\_rule\_by\_layer\_ids()}{get\_schc\_rule\_by\_layer\_ids()}}
{\footnotesize\ttfamily static struct \mbox{\hyperlink{structschc__rule__t}{schc\+\_\+rule\+\_\+t}}$\ast$ get\+\_\+schc\+\_\+rule\+\_\+by\+\_\+layer\+\_\+ids (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{ip\+\_\+rule\+\_\+id,  }\item[{uint8\+\_\+t}]{udp\+\_\+rule\+\_\+id,  }\item[{uint8\+\_\+t}]{coap\+\_\+rule\+\_\+id,  }\item[{uint32\+\_\+t}]{device\+\_\+id,  }\item[{\mbox{\hyperlink{schc__config_8h_a00b61f9b90ab7065eb6a978141d7fd34}{reliability\+\_\+mode}}}]{mode }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\mbox{\Hypertarget{compressor_8c_aaf76c0525a94eecb1f694ba09b435c49}\label{compressor_8c_aaf76c0525a94eecb1f694ba09b435c49}} 
\index{compressor.c@{compressor.c}!get\_schc\_rule\_by\_reliability\_mode@{get\_schc\_rule\_by\_reliability\_mode}}
\index{get\_schc\_rule\_by\_reliability\_mode@{get\_schc\_rule\_by\_reliability\_mode}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{get\_schc\_rule\_by\_reliability\_mode()}{get\_schc\_rule\_by\_reliability\_mode()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structschc__rule__t}{schc\+\_\+rule\+\_\+t}}$\ast$ get\+\_\+schc\+\_\+rule\+\_\+by\+\_\+reliability\+\_\+mode (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structschc__rule__t}{schc\+\_\+rule\+\_\+t}} $\ast$}]{schc\+\_\+rule,  }\item[{\mbox{\hyperlink{schc__config_8h_a00b61f9b90ab7065eb6a978141d7fd34}{reliability\+\_\+mode}}}]{mode,  }\item[{uint32\+\_\+t}]{device\+\_\+id }\end{DoxyParamCaption})}

\mbox{\Hypertarget{compressor_8c_a5bafc11a567bc093210ab7cb3afe650f}\label{compressor_8c_a5bafc11a567bc093210ab7cb3afe650f}} 
\index{compressor.c@{compressor.c}!get\_schc\_rule\_by\_rule\_id@{get\_schc\_rule\_by\_rule\_id}}
\index{get\_schc\_rule\_by\_rule\_id@{get\_schc\_rule\_by\_rule\_id}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{get\_schc\_rule\_by\_rule\_id()}{get\_schc\_rule\_by\_rule\_id()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structschc__rule__t}{schc\+\_\+rule\+\_\+t}}$\ast$ get\+\_\+schc\+\_\+rule\+\_\+by\+\_\+rule\+\_\+id (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{rule\+\_\+id,  }\item[{uint32\+\_\+t}]{device\+\_\+id }\end{DoxyParamCaption})}

\mbox{\Hypertarget{compressor_8c_a3700c9316a3fa2826dd77686c161638c}\label{compressor_8c_a3700c9316a3fa2826dd77686c161638c}} 
\index{compressor.c@{compressor.c}!ignore@{ignore}}
\index{ignore@{ignore}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{ignore()}{ignore()}}
{\footnotesize\ttfamily static uint8\+\_\+t ignore (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structschc__field}{schc\+\_\+field}} $\ast$}]{target\+\_\+field,  }\item[{unsigned char $\ast$}]{field\+\_\+value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



The ignore matching operator. 


\begin{DoxyParams}{Parameters}
{\em target\+\_\+field} & the field from the rule \\
\hline
{\em field\+\_\+value} & the value from the header to compare with the rule value\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 
\end{DoxyReturn}
\mbox{\Hypertarget{compressor_8c_aaa6535816b00df52f9f7b05970feca0a}\label{compressor_8c_aaa6535816b00df52f9f7b05970feca0a}} 
\index{compressor.c@{compressor.c}!matchmap@{matchmap}}
\index{matchmap@{matchmap}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{matchmap()}{matchmap()}}
{\footnotesize\ttfamily static uint8\+\_\+t matchmap (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structschc__field}{schc\+\_\+field}} $\ast$}]{target\+\_\+field,  }\item[{unsigned char $\ast$}]{field\+\_\+value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



The match-\/map matching operator. 


\begin{DoxyParams}{Parameters}
{\em target\+\_\+field} & the field from the rule \\
\hline
{\em field\+\_\+value} & the value from the header to compare with the rule value\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if the the field value is equal to one of the values found in the mapping array 0 if no matching value is found in the mapping array 
\end{DoxyReturn}
\mbox{\Hypertarget{compressor_8c_a6e20dc749624654a5c2a59a7ab0a45b8}\label{compressor_8c_a6e20dc749624654a5c2a59a7ab0a45b8}} 
\index{compressor.c@{compressor.c}!MSB@{MSB}}
\index{MSB@{MSB}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{MSB()}{MSB()}}
{\footnotesize\ttfamily static uint8\+\_\+t M\+SB (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structschc__field}{schc\+\_\+field}} $\ast$}]{target\+\_\+field,  }\item[{unsigned char $\ast$}]{field\+\_\+value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



The M\+SB matching operator. 


\begin{DoxyParams}{Parameters}
{\em target\+\_\+field} & the field from the rule \\
\hline
{\em field\+\_\+value} & the value from the header to compare with the rule value\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if the M\+SB of the target field matches the M\+SB of the field value 0 if the M\+SB of the target field doesn\textquotesingle{}t match the M\+SB of the field value 
\end{DoxyReturn}
\mbox{\Hypertarget{compressor_8c_a36e8de302d391da17499a00daaf598de}\label{compressor_8c_a36e8de302d391da17499a00daaf598de}} 
\index{compressor.c@{compressor.c}!schc\_compress@{schc\_compress}}
\index{schc\_compress@{schc\_compress}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{schc\_compress()}{schc\_compress()}}
{\footnotesize\ttfamily int16\+\_\+t schc\+\_\+compress (\begin{DoxyParamCaption}\item[{const uint8\+\_\+t $\ast$}]{data,  }\item[{uint8\+\_\+t $\ast$}]{buf,  }\item[{uint16\+\_\+t}]{total\+\_\+length,  }\item[{uint32\+\_\+t}]{device\+\_\+id,  }\item[{\mbox{\hyperlink{config_8h_a99f26e6ee9fcd62f75203b5402df8098}{direction}}}]{dir,  }\item[{\mbox{\hyperlink{config_8h_af2b559cc2ee2eaee47fe1f15cc99f49e}{device\+\_\+type}}}]{device\+\_\+type,  }\item[{struct \mbox{\hyperlink{structschc__rule__t}{schc\+\_\+rule\+\_\+t}} $\ast$$\ast$}]{schc\+\_\+rule }\end{DoxyParamCaption})}



Compresses a Co\+A\+P/\+U\+D\+P/\+IP packet. 


\begin{DoxyParams}{Parameters}
{\em data} & pointer to the packet \\
\hline
{\em buf} & pointer to the compressed packet buffer \\
\hline
{\em total\+\_\+length} & the length of the packet \\
\hline
{\em device\+\_\+id} & the device id to find a rule for \\
\hline
{\em direction} & the direction of the flow (UP\+: L\+P\+W\+AN to I\+Pv6, D\+O\+WN\+: I\+Pv6 to L\+P\+W\+AN) \\
\hline
{\em device\+\_\+type} & the device type\+: N\+E\+T\+W\+O\+R\+K\+\_\+\+G\+A\+T\+E\+W\+AY or D\+E\+V\+I\+CE \\
\hline
{\em schc\+\_\+rule} & a pointer to a schc rule struct to return the rule that was found\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
length the length of the compressed packet -\/1 on a memory overflow
\end{DoxyReturn}
\begin{DoxyNote}{Note}
the compressor will only look for rules configured with the N\+O\+T\+\_\+\+F\+R\+A\+G\+M\+E\+N\+T\+ED reliability mode 
\end{DoxyNote}
\mbox{\Hypertarget{compressor_8c_a4fd03f3acd56b4bf55fc4c8e48567ab7}\label{compressor_8c_a4fd03f3acd56b4bf55fc4c8e48567ab7}} 
\index{compressor.c@{compressor.c}!schc\_compressor\_init@{schc\_compressor\_init}}
\index{schc\_compressor\_init@{schc\_compressor\_init}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{schc\_compressor\_init()}{schc\_compressor\_init()}}
{\footnotesize\ttfamily uint8\+\_\+t schc\+\_\+compressor\+\_\+init (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{src\mbox{[}16\mbox{]} }\end{DoxyParamCaption})}



Initializes the S\+C\+HC compressor. 


\begin{DoxyParams}{Parameters}
{\em node\+\_\+ip} & a pointer to the source it\textquotesingle{}s ip address\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
error error codes on error 
\end{DoxyReturn}
\mbox{\Hypertarget{compressor_8c_ab7cac7873bdecbbf5ea769d90d91cc7e}\label{compressor_8c_ab7cac7873bdecbbf5ea769d90d91cc7e}} 
\index{compressor.c@{compressor.c}!schc\_decompress@{schc\_decompress}}
\index{schc\_decompress@{schc\_decompress}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{schc\_decompress()}{schc\_decompress()}}
{\footnotesize\ttfamily uint16\+\_\+t schc\+\_\+decompress (\begin{DoxyParamCaption}\item[{const uint8\+\_\+t $\ast$}]{data,  }\item[{uint8\+\_\+t $\ast$}]{buf,  }\item[{uint32\+\_\+t}]{device\+\_\+id,  }\item[{uint16\+\_\+t}]{total\+\_\+length,  }\item[{\mbox{\hyperlink{config_8h_a99f26e6ee9fcd62f75203b5402df8098}{direction}}}]{dir,  }\item[{\mbox{\hyperlink{config_8h_af2b559cc2ee2eaee47fe1f15cc99f49e}{device\+\_\+type}}}]{device\+\_\+type }\end{DoxyParamCaption})}



Construct the header from the layered set of rules. 


\begin{DoxyParams}{Parameters}
{\em data} & pointer to the received data \\
\hline
{\em buf} & pointer where to save the decompressed packet \\
\hline
{\em device\+\_\+id} & the device its id \\
\hline
{\em total\+\_\+length} & the total length of the received data \\
\hline
{\em direction} & the direction of the flow (UP\+: L\+P\+W\+AN to I\+Pv6, D\+O\+WN\+: I\+Pv6 to L\+P\+W\+AN) \\
\hline
{\em device\+\_\+type} & the type of device\+: N\+E\+T\+W\+O\+R\+K\+\_\+\+G\+A\+T\+E\+W\+AY or D\+E\+V\+I\+CE\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
length length of the newly constructed packet 0 the rule was not found 
\end{DoxyReturn}
\mbox{\Hypertarget{compressor_8c_af6513773b3be40ec48f9db466ad89e37}\label{compressor_8c_af6513773b3be40ec48f9db466ad89e37}} 
\index{compressor.c@{compressor.c}!schc\_find\_coap\_rule\_from\_header@{schc\_find\_coap\_rule\_from\_header}}
\index{schc\_find\_coap\_rule\_from\_header@{schc\_find\_coap\_rule\_from\_header}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{schc\_find\_coap\_rule\_from\_header()}{schc\_find\_coap\_rule\_from\_header()}}
{\footnotesize\ttfamily static struct \mbox{\hyperlink{structschc__coap__rule__t}{schc\+\_\+coap\+\_\+rule\+\_\+t}}$\ast$ schc\+\_\+find\+\_\+coap\+\_\+rule\+\_\+from\+\_\+header (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structpcoap__pdu}{pcoap\+\_\+pdu}} $\ast$}]{pdu,  }\item[{uint32\+\_\+t}]{device\+\_\+id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Find a matching rule for the Co\+AP header for a device id. 


\begin{DoxyParams}{Parameters}
{\em pdu} & the Co\+AP buffer \\
\hline
{\em device\+\_\+id} & the device to find a rule for\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
id the Co\+AP rule id 0 if no rule was found 
\end{DoxyReturn}
\mbox{\Hypertarget{compressor_8c_aa8a76b825f1ad7fe92118e7604c59cce}\label{compressor_8c_aa8a76b825f1ad7fe92118e7604c59cce}} 
\index{compressor.c@{compressor.c}!schc\_find\_ipv6\_rule\_from\_header@{schc\_find\_ipv6\_rule\_from\_header}}
\index{schc\_find\_ipv6\_rule\_from\_header@{schc\_find\_ipv6\_rule\_from\_header}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{schc\_find\_ipv6\_rule\_from\_header()}{schc\_find\_ipv6\_rule\_from\_header()}}
{\footnotesize\ttfamily static struct \mbox{\hyperlink{structschc__ipv6__rule__t}{schc\+\_\+ipv6\+\_\+rule\+\_\+t}}$\ast$ schc\+\_\+find\+\_\+ipv6\+\_\+rule\+\_\+from\+\_\+header (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structschc__udpip__hdr}{schc\+\_\+udpip\+\_\+hdr}} $\ast$}]{ip\+\_\+udp\+\_\+header,  }\item[{uint32\+\_\+t}]{device\+\_\+id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Find a matching rule for the IP header. 


\begin{DoxyParams}{Parameters}
{\em ip\+\_\+udp\+\_\+header} & the I\+P/\+U\+DP header struct \\
\hline
{\em device\+\_\+id} & the device to find an IP rule for\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the rule N\+U\+LL if no rule is found 
\end{DoxyReturn}
\mbox{\Hypertarget{compressor_8c_a899a5ee1d8a65d6df0143667b3f218e0}\label{compressor_8c_a899a5ee1d8a65d6df0143667b3f218e0}} 
\index{compressor.c@{compressor.c}!schc\_find\_udp\_rule\_from\_header@{schc\_find\_udp\_rule\_from\_header}}
\index{schc\_find\_udp\_rule\_from\_header@{schc\_find\_udp\_rule\_from\_header}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{schc\_find\_udp\_rule\_from\_header()}{schc\_find\_udp\_rule\_from\_header()}}
{\footnotesize\ttfamily static struct \mbox{\hyperlink{structschc__udp__rule__t}{schc\+\_\+udp\+\_\+rule\+\_\+t}}$\ast$ schc\+\_\+find\+\_\+udp\+\_\+rule\+\_\+from\+\_\+header (\begin{DoxyParamCaption}\item[{const struct \mbox{\hyperlink{structschc__udpip__hdr}{schc\+\_\+udpip\+\_\+hdr}} $\ast$}]{ip\+\_\+udp\+\_\+header,  }\item[{uint32\+\_\+t}]{device\+\_\+id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Find a matching rule for the U\+DP header. 


\begin{DoxyParams}{Parameters}
{\em data} & pointer to the application generated data \\
\hline
{\em device\+\_\+id} & the device to find a U\+DP rule for\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
rule id the rule id 0 if no rule is found 
\end{DoxyReturn}
\mbox{\Hypertarget{compressor_8c_a3e74925e4bb4cb937a3ac4b951f41119}\label{compressor_8c_a3e74925e4bb4cb937a3ac4b951f41119}} 
\index{compressor.c@{compressor.c}!set\_node\_ip@{set\_node\_ip}}
\index{set\_node\_ip@{set\_node\_ip}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{set\_node\_ip()}{set\_node\_ip()}}
{\footnotesize\ttfamily static void set\+\_\+node\+\_\+ip (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{config_8h_a871e6877df8d1bf5f1d0690d6b918f6b}{schc\+\_\+ipaddr\+\_\+t}} $\ast$}]{node\+\_\+ip }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Notifies the compressor about the node its IP address. 


\begin{DoxyParams}{Parameters}
{\em node\+\_\+ip} & pointer to the ip address array\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 
\end{DoxyReturn}
\mbox{\Hypertarget{compressor_8c_a15002a02e9cae01e5629cb2d474fe482}\label{compressor_8c_a15002a02e9cae01e5629cb2d474fe482}} 
\index{compressor.c@{compressor.c}!set\_rule\_id@{set\_rule\_id}}
\index{set\_rule\_id@{set\_rule\_id}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{set\_rule\_id()}{set\_rule\_id()}}
{\footnotesize\ttfamily int8\+\_\+t set\+\_\+rule\+\_\+id (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structschc__rule__t}{schc\+\_\+rule\+\_\+t}} $\ast$}]{schc\+\_\+rule,  }\item[{uint8\+\_\+t $\ast$}]{data }\end{DoxyParamCaption})}



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{compressor_8c_afb9db911b050d292c34053ab9e8cdf8c}\label{compressor_8c_afb9db911b050d292c34053ab9e8cdf8c}} 
\index{compressor.c@{compressor.c}!coap\_header\_fields@{coap\_header\_fields}}
\index{coap\_header\_fields@{coap\_header\_fields}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{coap\_header\_fields}{coap\_header\_fields}}
{\footnotesize\ttfamily unsigned char coap\+\_\+header\+\_\+fields\mbox{[}\mbox{\hyperlink{schc__config__example_8h_af1690024e8fe24a690d86ec4dd5d3bb6}{C\+O\+A\+P\+\_\+\+F\+I\+E\+L\+DS}}\mbox{]}\mbox{[}\mbox{\hyperlink{schc__config__example_8h_aa6420ecddb30151dd25bc1a2da3aacd1}{M\+A\+X\+\_\+\+C\+O\+A\+P\+\_\+\+F\+I\+E\+L\+D\+\_\+\+L\+E\+N\+G\+TH}}\mbox{]}}

\mbox{\Hypertarget{compressor_8c_a8b2173bb0d4d2c74c3f1e683922ac905}\label{compressor_8c_a8b2173bb0d4d2c74c3f1e683922ac905}} 
\index{compressor.c@{compressor.c}!DEVICE\_TYPE@{DEVICE\_TYPE}}
\index{DEVICE\_TYPE@{DEVICE\_TYPE}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{DEVICE\_TYPE}{DEVICE\_TYPE}}
{\footnotesize\ttfamily \mbox{\hyperlink{config_8h_af2b559cc2ee2eaee47fe1f15cc99f49e}{device\+\_\+type}} D\+E\+V\+I\+C\+E\+\_\+\+T\+Y\+PE\hspace{0.3cm}{\ttfamily [static]}}

\mbox{\Hypertarget{compressor_8c_a9002ee397432c569fdda24ab772716e5}\label{compressor_8c_a9002ee397432c569fdda24ab772716e5}} 
\index{compressor.c@{compressor.c}!DI@{DI}}
\index{DI@{DI}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{DI}{DI}}
{\footnotesize\ttfamily \mbox{\hyperlink{config_8h_a99f26e6ee9fcd62f75203b5402df8098}{direction}} DI\hspace{0.3cm}{\ttfamily [static]}}

\mbox{\Hypertarget{compressor_8c_a092ee897de6debb778fc14e1f242dc18}\label{compressor_8c_a092ee897de6debb778fc14e1f242dc18}} 
\index{compressor.c@{compressor.c}!ipv6\_header\_fields@{ipv6\_header\_fields}}
\index{ipv6\_header\_fields@{ipv6\_header\_fields}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{ipv6\_header\_fields}{ipv6\_header\_fields}}
{\footnotesize\ttfamily unsigned char ipv6\+\_\+header\+\_\+fields\mbox{[}\mbox{\hyperlink{schc__config__example_8h_ae1b67de7a1c26318d23f1c34e89fb989}{I\+P\+V6\+\_\+\+F\+I\+E\+L\+DS}}\mbox{]}\mbox{[}\mbox{\hyperlink{schc__config__example_8h_a96b977962436620ec037645e3e2e0ee8}{M\+A\+X\+\_\+\+I\+P\+V6\+\_\+\+F\+I\+E\+L\+D\+\_\+\+L\+E\+N\+G\+TH}}\mbox{]}}

\mbox{\Hypertarget{compressor_8c_a832436cdee822ecccd06537f5e889955}\label{compressor_8c_a832436cdee822ecccd06537f5e889955}} 
\index{compressor.c@{compressor.c}!json\_parser@{json\_parser}}
\index{json\_parser@{json\_parser}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{json\_parser}{json\_parser}}
{\footnotesize\ttfamily \mbox{\hyperlink{structjsmn__parser}{jsmn\+\_\+parser}} json\+\_\+parser}

\mbox{\Hypertarget{compressor_8c_a6d19fbe1409f7470283881e0b642c417}\label{compressor_8c_a6d19fbe1409f7470283881e0b642c417}} 
\index{compressor.c@{compressor.c}!json\_token@{json\_token}}
\index{json\_token@{json\_token}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{json\_token}{json\_token}}
{\footnotesize\ttfamily \mbox{\hyperlink{structjsmntok__t}{jsmntok\+\_\+t}} json\+\_\+token\mbox{[}\mbox{\hyperlink{schc__config__example_8h_a4e7d67d7aea26c4f57d1098595f90662}{J\+S\+O\+N\+\_\+\+T\+O\+K\+E\+NS}}\mbox{]}}

\mbox{\Hypertarget{compressor_8c_af88fc53bc74390cc215e9b1548f38359}\label{compressor_8c_af88fc53bc74390cc215e9b1548f38359}} 
\index{compressor.c@{compressor.c}!node\_ip\_6@{node\_ip\_6}}
\index{node\_ip\_6@{node\_ip\_6}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{node\_ip\_6}{node\_ip\_6}}
{\footnotesize\ttfamily \mbox{\hyperlink{config_8h_a871e6877df8d1bf5f1d0690d6b918f6b}{schc\+\_\+ipaddr\+\_\+t}} node\+\_\+ip\+\_\+6\hspace{0.3cm}{\ttfamily [static]}}

\mbox{\Hypertarget{compressor_8c_a19692020241c44be02a07c6ac77b3d92}\label{compressor_8c_a19692020241c44be02a07c6ac77b3d92}} 
\index{compressor.c@{compressor.c}!udp\_header\_fields@{udp\_header\_fields}}
\index{udp\_header\_fields@{udp\_header\_fields}!compressor.c@{compressor.c}}
\doxysubsubsection{\texorpdfstring{udp\_header\_fields}{udp\_header\_fields}}
{\footnotesize\ttfamily unsigned char udp\+\_\+header\+\_\+fields\mbox{[}\mbox{\hyperlink{schc__config__example_8h_aed36719a087639bf1875b85276f09e55}{U\+D\+P\+\_\+\+F\+I\+E\+L\+DS}}\mbox{]}\mbox{[}\mbox{\hyperlink{schc__config__example_8h_aac32e96e8faf7ff86aced84537107bca}{M\+A\+X\+\_\+\+U\+D\+P\+\_\+\+F\+I\+E\+L\+D\+\_\+\+L\+E\+N\+G\+TH}}\mbox{]}}

